<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolio Management Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        
        .sidebar {
            transition: all 0.3s;
        }
        
        .content-area {
            transition: all 0.3s;
        }
        
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
            }
            
            .sidebar.active {
                transform: translateX(0);
            }
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .image-preview {
            max-width: 200px;
            max-height: 200px;
            object-fit: contain;
        }
        
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 12px 20px;
            border-radius: 6px;
            color: white;
            z-index: 1000;
            transform: translateX(400px);
            transition: transform 0.3s ease;
        }
        
        .toast.show {
            transform: translateX(0);
        }
        
        .toast.success {
            background-color: #10B981;
        }
        
        .toast.error {
            background-color: #EF4444;
        }
    </style>
</head>
<body class="bg-gray-100">
    <!-- Toast Notifications -->
    <div id="toast-container"></div>

    <div class="flex h-screen">
        <!-- Sidebar -->
        <div class="sidebar bg-gray-800 text-white w-64 fixed inset-y-0 left-0 z-50">
            <div class="p-4">
                <h1 class="text-2xl font-bold">Portfolio Manager</h1>
                <p class="text-sm text-gray-400 mt-1">Complete Control Panel</p>
            </div>
            <nav class="mt-8">
                <a href="#" class="tab-link block py-2 px-4 text-gray-300 hover:bg-gray-700 hover:text-white" data-tab="hero">
                    <i class="fas fa-user mr-2"></i> Hero Section
                </a>
                <a href="#" class="tab-link block py-2 px-4 text-gray-300 hover:bg-gray-700 hover:text-white" data-tab="services">
                    <i class="fas fa-cog mr-2"></i> Services
                </a>
                <a href="#" class="tab-link block py-2 px-4 text-gray-300 hover:bg-gray-700 hover:text-white" data-tab="projects">
                    <i class="fas fa-briefcase mr-2"></i> Projects
                </a>
                <a href="#" class="tab-link block py-2 px-4 text-gray-300 hover:bg-gray-700 hover:text-white" data-tab="education">
                    <i class="fas fa-graduation-cap mr-2"></i> Education
                </a>
                <a href="#" class="tab-link block py-2 px-4 text-gray-300 hover:bg-gray-700 hover:text-white" data-tab="experience">
                    <i class="fas fa-briefcase mr-2"></i> Experience
                </a>
                <a href="#" class="tab-link block py-2 px-4 text-gray-300 hover:bg-gray-700 hover:text-white" data-tab="skills">
                    <i class="fas fa-chart-bar mr-2"></i> Skills
                </a>
                <a href="#" class="tab-link block py-2 px-4 text-gray-300 hover:bg-gray-700 hover:text-white" data-tab="testimonials">
                    <i class="fas fa-comments mr-2"></i> Testimonials
                </a>
                <a href="#" class="tab-link block py-2 px-4 text-gray-300 hover:bg-gray-700 hover:text-white" data-tab="contact">
                    <i class="fas fa-address-book mr-2"></i> Contact
                </a>
                <a href="#" class="tab-link block py-2 px-4 text-gray-300 hover:bg-gray-700 hover:text-white" data-tab="theme">
                    <i class="fas fa-palette mr-2"></i> Theme
                </a>
                <a href="#" class="tab-link block py-2 px-4 text-gray-300 hover:bg-gray-700 hover:text-white" data-tab="siteinfo">
                    <i class="fas fa-globe mr-2"></i> Site Info
                </a>
            </nav>
            <div class="absolute bottom-4 left-4 right-4">
                <div class="text-xs text-gray-400">
                    <div id="connection-status" class="flex items-center mb-2">
                        <div class="w-2 h-2 bg-red-500 rounded-full mr-2"></div>
                        <span>Connecting...</span>
                    </div>
                    <div>Server: <span id="server-status">Checking...</span></div>
                </div>
            </div>
        </div>

        <!-- Main content -->
        <div class="content-area ml-0 md:ml-64 flex-1 overflow-auto">
            <!-- Mobile header -->
            <header class="bg-white shadow-sm p-4 flex items-center md:hidden">
                <button id="menu-toggle" class="text-gray-500 focus:outline-none">
                    <i class="fas fa-bars text-xl"></i>
                </button>
                <h1 class="text-xl font-semibold ml-4">Portfolio Manager</h1>
            </header>

            <!-- Tab content -->
            <div class="p-6">
                <!-- Hero Section Tab -->
                <div id="hero-tab" class="tab-content active">
                    <h2 class="text-2xl font-bold mb-6">Hero Section</h2>
                    <form id="hero-form" class="bg-white p-6 rounded-lg shadow-md">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Name *</label>
                                <input type="text" id="hero-name" class="w-full p-2 border border-gray-300 rounded-md" required>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Title/Description *</label>
                                <textarea id="hero-description" class="w-full p-2 border border-gray-300 rounded-md" rows="3" required></textarea>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Profile Image</label>
                                <input type="file" id="hero-profile-image" class="w-full p-2 border border-gray-300 rounded-md" accept="image/*">
                                <div id="profile-image-preview" class="mt-2"></div>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Resume/CV</label>
                                <input type="file" id="hero-resume" class="w-full p-2 border border-gray-300 rounded-md" accept=".pdf,.doc,.docx">
                                <div id="resume-preview" class="mt-2"></div>
                            </div>
                        </div>
                        <button type="submit" class="mt-6 bg-blue-600 text-white py-2 px-6 rounded-md hover:bg-blue-700 flex items-center">
                            <span>Save Hero Section</span>
                            <div id="hero-loading" class="loading ml-2 hidden"></div>
                        </button>
                    </form>
                </div>

                <!-- Services Tab -->
                <div id="services-tab" class="tab-content">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold">Services</h2>
                        <button id="add-service" class="bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 flex items-center">
                            <i class="fas fa-plus mr-2"></i> Add New Service
                        </button>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <div id="services-list" class="space-y-4">
                            <div class="text-center py-8">
                                <div class="loading mx-auto"></div>
                                <p class="mt-2 text-gray-500">Loading services...</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Projects Tab -->
                <div id="projects-tab" class="tab-content">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold">Projects</h2>
                        <button id="add-project" class="bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 flex items-center">
                            <i class="fas fa-plus mr-2"></i> Add New Project
                        </button>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <div id="projects-list" class="space-y-6">
                            <div class="text-center py-8">
                                <div class="loading mx-auto"></div>
                                <p class="mt-2 text-gray-500">Loading projects...</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Education Tab -->
                <div id="education-tab" class="tab-content">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold">Education</h2>
                        <button id="add-education" class="bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 flex items-center">
                            <i class="fas fa-plus mr-2"></i> Add Education
                        </button>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <div id="education-list" class="space-y-4">
                            <div class="text-center py-8">
                                <div class="loading mx-auto"></div>
                                <p class="mt-2 text-gray-500">Loading education...</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Experience Tab -->
                <div id="experience-tab" class="tab-content">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold">Experience</h2>
                        <button id="add-experience" class="bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 flex items-center">
                            <i class="fas fa-plus mr-2"></i> Add Experience
                        </button>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <div id="experience-list" class="space-y-4">
                            <div class="text-center py-8">
                                <div class="loading mx-auto"></div>
                                <p class="mt-2 text-gray-500">Loading experience...</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Skills Tab -->
                <div id="skills-tab" class="tab-content">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold">Skills</h2>
                        <button id="add-skill" class="bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 flex items-center">
                            <i class="fas fa-plus mr-2"></i> Add Skill
                        </button>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <div id="skills-list" class="space-y-4">
                            <div class="text-center py-8">
                                <div class="loading mx-auto"></div>
                                <p class="mt-2 text-gray-500">Loading skills...</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Testimonials Tab -->
                <div id="testimonials-tab" class="tab-content">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold">Testimonials</h2>
                        <button id="add-testimonial" class="bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 flex items-center">
                            <i class="fas fa-plus mr-2"></i> Add Testimonial
                        </button>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <div id="testimonials-list" class="space-y-4">
                            <div class="text-center py-8">
                                <div class="loading mx-auto"></div>
                                <p class="mt-2 text-gray-500">Loading testimonials...</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Contact Tab -->
                <div id="contact-tab" class="tab-content">
                    <h2 class="text-2xl font-bold mb-6">Contact Information</h2>
                    <form id="contact-form" class="bg-white p-6 rounded-lg shadow-md">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Phone</label>
                                <input type="text" id="contact-phone" class="w-full p-2 border border-gray-300 rounded-md">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                                <input type="email" id="contact-email" class="w-full p-2 border border-gray-300 rounded-md">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Location</label>
                                <input type="text" id="contact-location" class="w-full p-2 border border-gray-300 rounded-md">
                            </div>
                            <div class="md:col-span-2">
                                <h3 class="text-lg font-medium mb-4">Social Links</h3>
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">LinkedIn</label>
                                        <input type="url" id="contact-linkedin" class="w-full p-2 border border-gray-300 rounded-md">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">GitHub</label>
                                        <input type="url" id="contact-github" class="w-full p-2 border border-gray-300 rounded-md">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Twitter</label>
                                        <input type="url" id="contact-twitter" class="w-full p-2 border border-gray-300 rounded-md">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <button type="submit" class="mt-6 bg-blue-600 text-white py-2 px-6 rounded-md hover:bg-blue-700 flex items-center">
                            <span>Save Contact Info</span>
                            <div id="contact-loading" class="loading ml-2 hidden"></div>
                        </button>
                    </form>
                </div>

                <!-- Theme Tab -->
                <div id="theme-tab" class="tab-content">
                    <h2 class="text-2xl font-bold mb-6">Theme Customization</h2>
                    <form id="theme-form" class="bg-white p-6 rounded-lg shadow-md">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Primary Color</label>
                                <input type="color" id="theme-primary" class="w-full p-1 border border-gray-300 rounded-md h-10" value="#121223">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Secondary Color</label>
                                <input type="color" id="theme-secondary" class="w-full p-1 border border-gray-300 rounded-md h-10" value="#1e1e32">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Accent Color</label>
                                <input type="color" id="theme-accent" class="w-full p-1 border border-gray-300 rounded-md h-10" value="#ffaa00">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Font Family</label>
                                <select id="theme-font" class="w-full p-2 border border-gray-300 rounded-md">
                                    <option value="Inter, sans-serif">Inter</option>
                                    <option value="'Helvetica Neue', Arial, sans-serif">Helvetica</option>
                                    <option value="Georgia, serif">Georgia</option>
                                    <option value="'Courier New', monospace">Courier New</option>
                                </select>
                            </div>
                        </div>
                        <div class="mt-4 p-4 border rounded-md bg-gray-50">
                            <h3 class="font-medium mb-2">Preview:</h3>
                            <div id="theme-preview" class="p-4 rounded border" style="background-color: #121223; color: white;">
                                <div class="p-4 mb-2" style="background-color: #1e1e32;">
                                    <h4 style="color: #ffaa00;">Sample Heading</h4>
                                    <p>Sample text content with the selected theme.</p>
                                </div>
                                <button class="px-4 py-2 rounded" style="background-color: #ffaa00; color: #121223;">Sample Button</button>
                            </div>
                        </div>
                        <button type="submit" class="mt-6 bg-blue-600 text-white py-2 px-6 rounded-md hover:bg-blue-700 flex items-center">
                            <span>Save Theme</span>
                            <div id="theme-loading" class="loading ml-2 hidden"></div>
                        </button>
                    </form>
                </div>

                <!-- Site Info Tab -->
                <div id="siteinfo-tab" class="tab-content">
                    <h2 class="text-2xl font-bold mb-6">Site Information</h2>
                    <form id="siteinfo-form" class="bg-white p-6 rounded-lg shadow-md">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Site Title</label>
                                <input type="text" id="siteinfo-title" class="w-full p-2 border border-gray-300 rounded-md">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Logo</label>
                                <input type="file" id="siteinfo-logo" class="w-full p-2 border border-gray-300 rounded-md" accept="image/*">
                                <div id="logo-preview" class="mt-2"></div>
                            </div>
                            <div class="md:col-span-2">
                                <label class="block text-sm font-medium text-gray-700 mb-2">Footer Text</label>
                                <textarea id="siteinfo-footer" class="w-full p-2 border border-gray-300 rounded-md" rows="3"></textarea>
                            </div>
                        </div>
                        <button type="submit" class="mt-6 bg-blue-600 text-white py-2 px-6 rounded-md hover:bg-blue-700 flex items-center">
                            <span>Save Site Info</span>
                            <div id="siteinfo-loading" class="loading ml-2 hidden"></div>
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Service Modal -->
    <div id="service-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
        <div class="bg-white p-6 rounded-lg w-full max-w-md mx-4">
            <h3 class="text-xl font-bold mb-4" id="service-modal-title">Add Service</h3>
            <form id="service-form">
                <input type="hidden" id="service-id">
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Title *</label>
                        <input type="text" id="service-title" class="w-full p-2 border border-gray-300 rounded-md" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Description *</label>
                        <textarea id="service-description" class="w-full p-2 border border-gray-300 rounded-md" rows="3" required></textarea>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Icon Class (Font Awesome)</label>
                        <input type="text" id="service-icon" class="w-full p-2 border border-gray-300 rounded-md" placeholder="fas fa-desktop">
                        <p class="text-xs text-gray-500 mt-1">Example: fas fa-desktop, fas fa-code, fas fa-paint-brush</p>
                    </div>
                </div>
                <div class="mt-6 flex justify-end space-x-2">
                    <button type="button" class="px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50" onclick="closeModal('service-modal')">Cancel</button>
                    <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center">
                        <span id="service-submit-text">Save</span>
                        <div id="service-modal-loading" class="loading ml-2 hidden"></div>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Project Modal -->
    <div id="project-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
        <div class="bg-white p-6 rounded-lg w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto">
            <h3 class="text-xl font-bold mb-4" id="project-modal-title">Add Project</h3>
            <form id="project-form">
                <input type="hidden" id="project-id">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="md:col-span-2">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Title *</label>
                        <input type="text" id="project-title" class="w-full p-2 border border-gray-300 rounded-md" required>
                    </div>
                    <div class="md:col-span-2">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Description *</label>
                        <textarea id="project-description" class="w-full p-2 border border-gray-300 rounded-md" rows="3" required></textarea>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Category</label>
                        <input type="text" id="project-category" class="w-full p-2 border border-gray-300 rounded-md">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Project Link</label>
                        <input type="url" id="project-link" class="w-full p-2 border border-gray-300 rounded-md" placeholder="https://">
                    </div>
                    <div class="md:col-span-2">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Project Images</label>
                        <input type="file" id="project-images" class="w-full p-2 border border-gray-300 rounded-md" accept="image/*" multiple>
                        <p class="text-xs text-gray-500 mt-1">You can add multiple images. First image will be the main display image.</p>
                        <div id="project-images-preview" class="mt-2 grid grid-cols-3 gap-2"></div>
                    </div>
                </div>
                <div class="mt-6 flex justify-end space-x-2">
                    <button type="button" class="px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50" onclick="closeModal('project-modal')">Cancel</button>
                    <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center">
                        <span id="project-submit-text">Save</span>
                        <div id="project-modal-loading" class="loading ml-2 hidden"></div>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Education Modal -->
    <div id="education-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
        <div class="bg-white p-6 rounded-lg w-full max-w-md mx-4">
            <h3 class="text-xl font-bold mb-4" id="education-modal-title">Add Education</h3>
            <form id="education-form">
                <input type="hidden" id="education-id">
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Period *</label>
                        <input type="text" id="education-period" class="w-full p-2 border border-gray-300 rounded-md" placeholder="2018 - 2022" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Degree *</label>
                        <input type="text" id="education-degree" class="w-full p-2 border border-gray-300 rounded-md" placeholder="Bachelor of Science in Computer Science" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Institution *</label>
                        <input type="text" id="education-institution" class="w-full p-2 border border-gray-300 rounded-md" placeholder="University Name" required>
                    </div>
                </div>
                <div class="mt-6 flex justify-end space-x-2">
                    <button type="button" class="px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50" onclick="closeModal('education-modal')">Cancel</button>
                    <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center">
                        <span id="education-submit-text">Save</span>
                        <div id="education-modal-loading" class="loading ml-2 hidden"></div>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Experience Modal -->
    <div id="experience-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
        <div class="bg-white p-6 rounded-lg w-full max-w-md mx-4">
            <h3 class="text-xl font-bold mb-4" id="experience-modal-title">Add Experience</h3>
            <form id="experience-form">
                <input type="hidden" id="experience-id">
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Period *</label>
                        <input type="text" id="experience-period" class="w-full p-2 border border-gray-300 rounded-md" placeholder="2020 - 2023" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Position *</label>
                        <input type="text" id="experience-position" class="w-full p-2 border border-gray-300 rounded-md" placeholder="Senior Developer" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Company *</label>
                        <input type="text" id="experience-company" class="w-full p-2 border border-gray-300 rounded-md" placeholder="Company Name" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Location</label>
                        <input type="text" id="experience-location" class="w-full p-2 border border-gray-300 rounded-md" placeholder="City, Country">
                    </div>
                </div>
                <div class="mt-6 flex justify-end space-x-2">
                    <button type="button" class="px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50" onclick="closeModal('experience-modal')">Cancel</button>
                    <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center">
                        <span id="experience-submit-text">Save</span>
                        <div id="experience-modal-loading" class="loading ml-2 hidden"></div>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Skill Modal -->
    <div id="skill-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
        <div class="bg-white p-6 rounded-lg w-full max-w-md mx-4">
            <h3 class="text-xl font-bold mb-4" id="skill-modal-title">Add Skill</h3>
            <form id="skill-form">
                <input type="hidden" id="skill-id">
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Skill Name *</label>
                        <input type="text" id="skill-name" class="w-full p-2 border border-gray-300 rounded-md" placeholder="Web Development" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Percentage *</label>
                        <input type="number" id="skill-percentage" class="w-full p-2 border border-gray-300 rounded-md" min="1" max="100" placeholder="85" required>
                        <p class="text-xs text-gray-500 mt-1">Enter a number between 1 and 100</p>
                    </div>
                </div>
                <div class="mt-6 flex justify-end space-x-2">
                    <button type="button" class="px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50" onclick="closeModal('skill-modal')">Cancel</button>
                    <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center">
                        <span id="skill-submit-text">Save</span>
                        <div id="skill-modal-loading" class="loading ml-2 hidden"></div>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Testimonial Modal -->
    <div id="testimonial-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
        <div class="bg-white p-6 rounded-lg w-full max-w-md mx-4">
            <h3 class="text-xl font-bold mb-4" id="testimonial-modal-title">Add Testimonial</h3>
            <form id="testimonial-form">
                <input type="hidden" id="testimonial-id">
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Name *</label>
                        <input type="text" id="testimonial-name" class="w-full p-2 border border-gray-300 rounded-md" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Position</label>
                        <input type="text" id="testimonial-position" class="w-full p-2 border border-gray-300 rounded-md">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Company</label>
                        <input type="text" id="testimonial-company" class="w-full p-2 border border-gray-300 rounded-md">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Testimonial Content *</label>
                        <textarea id="testimonial-content" class="w-full p-2 border border-gray-300 rounded-md" rows="4" required></textarea>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Avatar Image</label>
                        <input type="file" id="testimonial-avatar" class="w-full p-2 border border-gray-300 rounded-md" accept="image/*">
                        <div id="testimonial-avatar-preview" class="mt-2"></div>
                    </div>
                </div>
                <div class="mt-6 flex justify-end space-x-2">
                    <button type="button" class="px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50" onclick="closeModal('testimonial-modal')">Cancel</button>
                    <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center">
                        <span id="testimonial-submit-text">Save</span>
                        <div id="testimonial-modal-loading" class="loading ml-2 hidden"></div>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        const API_BASE = 'https://portfolio-backend-8xqk.onrender.com/api';
        
        // Utility Functions
        function showToast(message, type = 'success') {
            const toast = document.createElement('div');
            toast.className = `toast ${type} ${type === 'success' ? 'success' : 'error'}`;
            toast.innerHTML = `
                <div class="flex items-center">
                    <i class="fas ${type === 'success' ? 'fa-check-circle' : 'fa-exclamation-triangle'} mr-2"></i>
                    <span>${message}</span>
                </div>
            `;
            
            document.getElementById('toast-container').appendChild(toast);
            
            setTimeout(() => {
                toast.classList.add('show');
            }, 100);
            
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => {
                    toast.remove();
                }, 300);
            }, 4000);
        }
        
        function setLoading(button, isLoading) {
            const loadingEl = button.querySelector('.loading');
            if (loadingEl) {
                if (isLoading) {
                    loadingEl.classList.remove('hidden');
                    button.disabled = true;
                } else {
                    loadingEl.classList.add('hidden');
                    button.disabled = false;
                }
            }
        }
        
        function openModal(modalId) {
            document.getElementById(modalId).classList.remove('hidden');
        }
        
        function closeModal(modalId) {
            document.getElementById(modalId).classList.add('hidden');
        }
        
        async function checkServerHealth() {
            try {
                const response = await fetch(`${API_BASE}/health`);
                const statusEl = document.getElementById('connection-status');
                const serverStatusEl = document.getElementById('server-status');
                
                if (response.ok) {
                    statusEl.innerHTML = '<div class="w-2 h-2 bg-green-500 rounded-full mr-2"></div><span>Connected</span>';
                    serverStatusEl.textContent = 'Online';
                } else {
                    statusEl.innerHTML = '<div class="w-2 h-2 bg-red-500 rounded-full mr-2"></div><span>Disconnected</span>';
                    serverStatusEl.textContent = 'Offline';
                }
            } catch (error) {
                const statusEl = document.getElementById('connection-status');
                const serverStatusEl = document.getElementById('server-status');
                statusEl.innerHTML = '<div class="w-2 h-2 bg-red-500 rounded-full mr-2"></div><span>Disconnected</span>';
                serverStatusEl.textContent = 'Offline';
            }
        }
        
        // File upload helper
        async function uploadFile(file) {
            const formData = new FormData();
            formData.append('file', file);
            
            const response = await fetch(`${API_BASE}/upload`, {
                method: 'POST',
                body: formData
            });
            
            if (response.ok) {
                const result = await response.json();
                return result.filePath;
            } else {
                throw new Error('File upload failed');
            }
        }
        
        // Tab navigation
        document.querySelectorAll('.tab-link').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const tabId = link.getAttribute('data-tab');
                
                // Hide all tabs
                document.querySelectorAll('.tab-content').forEach(tab => {
                    tab.classList.remove('active');
                });
                
                // Show selected tab
                document.getElementById(`${tabId}-tab`).classList.add('active');
                
                // Load data for the tab if needed
                if (tabId === 'services') loadServices();
                else if (tabId === 'projects') loadProjects();
                else if (tabId === 'education') loadEducation();
                else if (tabId === 'experience') loadExperience();
                else if (tabId === 'skills') loadSkills();
                else if (tabId === 'testimonials') loadTestimonials();
                else if (tabId === 'hero') loadHero();
                else if (tabId === 'contact') loadContact();
                else if (tabId === 'theme') loadTheme();
                else if (tabId === 'siteinfo') loadSiteInfo();
            });
        });
        
        // Mobile menu toggle
        document.getElementById('menu-toggle').addEventListener('click', () => {
            document.querySelector('.sidebar').classList.toggle('active');
        });
        
        // Hero Section Management
        async function loadHero() {
            try {
                const response = await fetch(`${API_BASE}/hero`);
                if (response.ok) {
                    const result = await response.json();
                    if (result.success && result.data) {
                        const hero = result.data;
                        document.getElementById('hero-name').value = hero.name || '';
                        document.getElementById('hero-description').value = hero.description || '';
                        
                        // Show profile image preview if exists
                        if (hero.profileImage) {
                            document.getElementById('profile-image-preview').innerHTML = `
                                <img src="https://portfolio-backend-8xqk.onrender.com${hero.profileImage}" class="image-preview border rounded">
                                <p class="text-sm text-gray-500 mt-1">Current profile image</p>
                            `;
                        }
                        
                        // Show resume preview if exists
                        if (hero.resume) {
                            const fileName = hero.resume.split('/').pop();
                            document.getElementById('resume-preview').innerHTML = `
                                <a href="https://portfolio-backend-8xqk.onrender.com${hero.resume}" target="_blank" class="text-blue-600 hover:underline">${fileName}</a>
                                <p class="text-sm text-gray-500 mt-1">Current resume</p>
                            `;
                        }
                    }
                }
            } catch (error) {
                console.error('Error loading hero:', error);
                showToast('Error loading hero section', 'error');
            }
        }
        
        document.getElementById('hero-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const submitButton = e.target.querySelector('button[type="submit"]');
            setLoading(submitButton, true);
            
            const formData = new FormData();
            formData.append('name', document.getElementById('hero-name').value);
            formData.append('description', document.getElementById('hero-description').value);
            
            const profileImage = document.getElementById('hero-profile-image').files[0];
            if (profileImage) {
                formData.append('profileImage', profileImage);
            }
            
            const resume = document.getElementById('hero-resume').files[0];
            if (resume) {
                formData.append('resume', resume);
            }
            
            try {
                const response = await fetch(`${API_BASE}/hero`, {
                    method: 'POST',
                    body: formData
                });
                
                const result = await response.json();
                
                if (result.success) {
                    showToast('Hero section updated successfully!');
                    loadHero(); // Reload to show updated previews
                    document.getElementById('hero-profile-image').value = '';
                    document.getElementById('hero-resume').value = '';
                } else {
                    showToast(result.message || 'Error updating hero section', 'error');
                }
            } catch (error) {
                console.error('Error saving hero:', error);
                showToast('Error updating hero section', 'error');
            } finally {
                setLoading(submitButton, false);
            }
        });
        
        // Services Management
        async function loadServices() {
            try {
                const response = await fetch(`${API_BASE}/services`);
                if (response.ok) {
                    const result = await response.json();
                    const container = document.getElementById('services-list');
                    
                    if (result.success) {
                        if (result.data.length === 0) {
                            container.innerHTML = '<p class="text-gray-500 text-center py-8">No services added yet. Click "Add New Service" to get started.</p>';
                            return;
                        }
                        
                        container.innerHTML = result.data.map(service => `
                            <div class="border rounded-lg p-4 flex justify-between items-center">
                                <div class="flex items-center">
                                    <i class="${service.icon || 'fas fa-cog'} text-blue-600 text-xl mr-4"></i>
                                    <div>
                                        <h3 class="font-medium">${service.title}</h3>
                                        <p class="text-sm text-gray-600">${service.description.substring(0, 100)}...</p>
                                    </div>
                                </div>
                                <div class="flex space-x-2">
                                    <button class="edit-service text-blue-600 hover:text-blue-800 p-2" data-id="${service._id}">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="delete-service text-red-600 hover:text-red-800 p-2" data-id="${service._id}">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                        `).join('');
                        
                        // Add event listeners for edit and delete buttons
                        document.querySelectorAll('.edit-service').forEach(button => {
                            button.addEventListener('click', () => editService(button.getAttribute('data-id')));
                        });
                        
                        document.querySelectorAll('.delete-service').forEach(button => {
                            button.addEventListener('click', () => deleteService(button.getAttribute('data-id')));
                        });
                    }
                }
            } catch (error) {
                console.error('Error loading services:', error);
                showToast('Error loading services', 'error');
            }
        }
        
        document.getElementById('add-service').addEventListener('click', () => {
            document.getElementById('service-modal-title').textContent = 'Add Service';
            document.getElementById('service-form').reset();
            document.getElementById('service-id').value = '';
            document.getElementById('service-submit-text').textContent = 'Save';
            openModal('service-modal');
        });
        
        document.getElementById('service-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const submitButton = e.target.querySelector('button[type="submit"]');
            const loadingEl = document.getElementById('service-modal-loading');
            const submitText = document.getElementById('service-submit-text');
            
            loadingEl.classList.remove('hidden');
            submitText.textContent = 'Saving...';
            submitButton.disabled = true;
            
            const serviceData = {
                title: document.getElementById('service-title').value,
                description: document.getElementById('service-description').value,
                icon: document.getElementById('service-icon').value || 'fas fa-desktop'
            };
            
            const serviceId = document.getElementById('service-id').value;
            const url = serviceId ? 
                `${API_BASE}/services/${serviceId}` : 
                `${API_BASE}/services`;
                
            const method = serviceId ? 'PUT' : 'POST';
            
            try {
                const response = await fetch(url, {
                    method: method,
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(serviceData)
                });
                
                const result = await response.json();
                
                if (result.success) {
                    closeModal('service-modal');
                    loadServices();
                    showToast(result.message || 'Service saved successfully!');
                } else {
                    showToast(result.message || 'Error saving service', 'error');
                }
            } catch (error) {
                console.error('Error saving service:', error);
                showToast('Error saving service', 'error');
            } finally {
                loadingEl.classList.add('hidden');
                submitText.textContent = 'Save';
                submitButton.disabled = false;
            }
        });
        
        async function editService(id) {
            try {
                const response = await fetch(`${API_BASE}/services/${id}`);
                if (response.ok) {
                    const result = await response.json();
                    if (result.success) {
                        const service = result.data;
                        
                        document.getElementById('service-modal-title').textContent = 'Edit Service';
                        document.getElementById('service-id').value = service._id;
                        document.getElementById('service-title').value = service.title;
                        document.getElementById('service-description').value = service.description;
                        document.getElementById('service-icon').value = service.icon || '';
                        document.getElementById('service-submit-text').textContent = 'Update';
                        
                        openModal('service-modal');
                    }
                }
            } catch (error) {
                console.error('Error loading service for edit:', error);
                showToast('Error loading service', 'error');
            }
        }
        
        async function deleteService(id) {
            if (confirm('Are you sure you want to delete this service?')) {
                try {
                    const response = await fetch(`${API_BASE}/services/${id}`, {
                        method: 'DELETE'
                    });
                    
                    const result = await response.json();
                    
                    if (result.success) {
                        loadServices();
                        showToast(result.message || 'Service deleted successfully!');
                    } else {
                        showToast(result.message || 'Error deleting service', 'error');
                    }
                } catch (error) {
                    console.error('Error deleting service:', error);
                    showToast('Error deleting service', 'error');
                }
            }
        }
        
        // Projects Management
        async function loadProjects() {
            try {
                const response = await fetch(`${API_BASE}/projects`);
                if (response.ok) {
                    const result = await response.json();
                    const container = document.getElementById('projects-list');
                    
                    if (result.success) {
                        if (result.data.length === 0) {
                            container.innerHTML = '<p class="text-gray-500 text-center py-8">No projects added yet. Click "Add New Project" to get started.</p>';
                            return;
                        }
                        
                        container.innerHTML = result.data.map(project => `
                            <div class="border rounded-lg p-6">
                                <div class="flex justify-between items-start mb-4">
                                    <div>
                                        <h3 class="font-medium text-lg">${project.title}</h3>
                                        <p class="text-sm text-gray-600">${project.category || 'No category'}</p>
                                    </div>
                                    <div class="flex space-x-2">
                                        <button class="edit-project text-blue-600 hover:text-blue-800 p-2" data-id="${project._id}">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="delete-project text-red-600 hover:text-red-800 p-2" data-id="${project._id}">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </div>
                                <p class="text-gray-700 mb-4">${project.description}</p>
                                ${project.images && project.images.length > 0 ? `
                                    <div class="grid grid-cols-3 gap-2 mb-4">
                                        ${project.images.slice(0, 3).map(img => `
                                            <img src="https://portfolio-backend-8xqk.onrender.com${img}" class="w-full h-20 object-cover rounded border">
                                        `).join('')}
                                        ${project.images.length > 3 ? `<div class="text-center text-gray-500">+${project.images.length - 3} more</div>` : ''}
                                    </div>
                                ` : ''}
                                ${project.link ? `<a href="${project.link}" target="_blank" class="text-blue-600 hover:underline text-sm">View Project</a>` : ''}
                            </div>
                        `).join('');
                        
                        // Add event listeners for edit and delete buttons
                        document.querySelectorAll('.edit-project').forEach(button => {
                            button.addEventListener('click', () => editProject(button.getAttribute('data-id')));
                        });
                        
                        document.querySelectorAll('.delete-project').forEach(button => {
                            button.addEventListener('click', () => deleteProject(button.getAttribute('data-id')));
                        });
                    }
                }
            } catch (error) {
                console.error('Error loading projects:', error);
                showToast('Error loading projects', 'error');
            }
        }
        
        document.getElementById('add-project').addEventListener('click', () => {
            document.getElementById('project-modal-title').textContent = 'Add Project';
            document.getElementById('project-form').reset();
            document.getElementById('project-id').value = '';
            document.getElementById('project-images-preview').innerHTML = '';
            document.getElementById('project-submit-text').textContent = 'Save';
            openModal('project-modal');
        });
        
        // Project image preview
        document.getElementById('project-images').addEventListener('change', function(e) {
            const preview = document.getElementById('project-images-preview');
            preview.innerHTML = '';
            
            Array.from(e.target.files).forEach(file => {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const img = document.createElement('img');
                    img.src = e.target.result;
                    img.className = 'w-full h-20 object-cover rounded border';
                    preview.appendChild(img);
                };
                reader.readAsDataURL(file);
            });
        });
        
        document.getElementById('project-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const submitButton = e.target.querySelector('button[type="submit"]');
            const loadingEl = document.getElementById('project-modal-loading');
            const submitText = document.getElementById('project-submit-text');
            
            loadingEl.classList.remove('hidden');
            submitText.textContent = 'Saving...';
            submitButton.disabled = true;
            
            const projectData = {
                title: document.getElementById('project-title').value,
                description: document.getElementById('project-description').value,
                category: document.getElementById('project-category').value,
                link: document.getElementById('project-link').value
            };
            
            const projectId = document.getElementById('project-id').value;
            const url = projectId ? 
                `${API_BASE}/projects/${projectId}` : 
                `${API_BASE}/projects`;
                
            const method = projectId ? 'PUT' : 'POST';
            
            try {
                const response = await fetch(url, {
                    method: method,
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(projectData)
                });
                
                const result = await response.json();
                
                if (result.success) {
                    // Handle image uploads if any
                    const imageFiles = document.getElementById('project-images').files;
                    if (imageFiles.length > 0) {
                        const formData = new FormData();
                        Array.from(imageFiles).forEach(file => {
                            formData.append('images', file);
                        });
                        
                        const imageResponse = await fetch(`${API_BASE}/projects/${result.data._id}/images`, {
                            method: 'POST',
                            body: formData
                        });
                        
                        if (!imageResponse.ok) {
                            throw new Error('Failed to upload images');
                        }
                    }
                    
                    closeModal('project-modal');
                    loadProjects();
                    showToast(result.message || 'Project saved successfully!');
                } else {
                    showToast(result.message || 'Error saving project', 'error');
                }
            } catch (error) {
                console.error('Error saving project:', error);
                showToast('Error saving project', 'error');
            } finally {
                loadingEl.classList.add('hidden');
                submitText.textContent = 'Save';
                submitButton.disabled = false;
            }
        });
        
        async function editProject(id) {
            try {
                const response = await fetch(`${API_BASE}/projects/${id}`);
                if (response.ok) {
                    const result = await response.json();
                    if (result.success) {
                        const project = result.data;
                        
                        document.getElementById('project-modal-title').textContent = 'Edit Project';
                        document.getElementById('project-id').value = project._id;
                        document.getElementById('project-title').value = project.title;
                        document.getElementById('project-description').value = project.description;
                        document.getElementById('project-category').value = project.category || '';
                        document.getElementById('project-link').value = project.link || '';
                        document.getElementById('project-submit-text').textContent = 'Update';
                        
                        // Clear image preview and don't show existing images in file input
                        document.getElementById('project-images-preview').innerHTML = '';
                        
                        openModal('project-modal');
                    }
                }
            } catch (error) {
                console.error('Error loading project for edit:', error);
                showToast('Error loading project', 'error');
            }
        }
        
        async function deleteProject(id) {
            if (confirm('Are you sure you want to delete this project?')) {
                try {
                    const response = await fetch(`${API_BASE}/projects/${id}`, {
                        method: 'DELETE'
                    });
                    
                    const result = await response.json();
                    
                    if (result.success) {
                        loadProjects();
                        showToast(result.message || 'Project deleted successfully!');
                    } else {
                        showToast(result.message || 'Error deleting project', 'error');
                    }
                } catch (error) {
                    console.error('Error deleting project:', error);
                    showToast('Error deleting project', 'error');
                }
            }
        }
        
        // Education Management
        async function loadEducation() {
            try {
                const response = await fetch(`${API_BASE}/education`);
                if (response.ok) {
                    const result = await response.json();
                    const container = document.getElementById('education-list');
                    
                    if (result.success) {
                        if (result.data.length === 0) {
                            container.innerHTML = '<p class="text-gray-500 text-center py-8">No education entries added yet. Click "Add Education" to get started.</p>';
                            return;
                        }
                        
                        container.innerHTML = result.data.map(edu => `
                            <div class="border rounded-lg p-4 flex justify-between items-center">
                                <div>
                                    <h3 class="font-medium">${edu.degree}</h3>
                                    <p class="text-sm text-gray-600">${edu.institution}</p>
                                    <p class="text-xs text-gray-500">${edu.period}</p>
                                </div>
                                <div class="flex space-x-2">
                                    <button class="edit-education text-blue-600 hover:text-blue-800 p-2" data-id="${edu._id}">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="delete-education text-red-600 hover:text-red-800 p-2" data-id="${edu._id}">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                        `).join('');
                        
                        // Add event listeners
                        document.querySelectorAll('.edit-education').forEach(button => {
                            button.addEventListener('click', () => editEducation(button.getAttribute('data-id')));
                        });
                        
                        document.querySelectorAll('.delete-education').forEach(button => {
                            button.addEventListener('click', () => deleteEducation(button.getAttribute('data-id')));
                        });
                    }
                }
            } catch (error) {
                console.error('Error loading education:', error);
                showToast('Error loading education', 'error');
            }
        }
        
        document.getElementById('add-education').addEventListener('click', () => {
            document.getElementById('education-modal-title').textContent = 'Add Education';
            document.getElementById('education-form').reset();
            document.getElementById('education-id').value = '';
            document.getElementById('education-submit-text').textContent = 'Save';
            openModal('education-modal');
        });
        
        document.getElementById('education-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const submitButton = e.target.querySelector('button[type="submit"]');
            const loadingEl = document.getElementById('education-modal-loading');
            const submitText = document.getElementById('education-submit-text');
            
            loadingEl.classList.remove('hidden');
            submitText.textContent = 'Saving...';
            submitButton.disabled = true;
            
            const educationData = {
                period: document.getElementById('education-period').value,
                degree: document.getElementById('education-degree').value,
                institution: document.getElementById('education-institution').value
            };
            
            const educationId = document.getElementById('education-id').value;
            const url = educationId ? 
                `${API_BASE}/education/${educationId}` : 
                `${API_BASE}/education`;
                
            const method = educationId ? 'PUT' : 'POST';
            
            try {
                const response = await fetch(url, {
                    method: method,
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(educationData)
                });
                
                const result = await response.json();
                
                if (result.success) {
                    closeModal('education-modal');
                    loadEducation();
                    showToast(result.message || 'Education saved successfully!');
                } else {
                    showToast(result.message || 'Error saving education', 'error');
                }
            } catch (error) {
                console.error('Error saving education:', error);
                showToast('Error saving education', 'error');
            } finally {
                loadingEl.classList.add('hidden');
                submitText.textContent = 'Save';
                submitButton.disabled = false;
            }
        });
        
        async function editEducation(id) {
            try {
                const response = await fetch(`${API_BASE}/education/${id}`);
                if (response.ok) {
                    const result = await response.json();
                    if (result.success) {
                        const edu = result.data;
                        
                        document.getElementById('education-modal-title').textContent = 'Edit Education';
                        document.getElementById('education-id').value = edu._id;
                        document.getElementById('education-period').value = edu.period;
                        document.getElementById('education-degree').value = edu.degree;
                        document.getElementById('education-institution').value = edu.institution;
                        document.getElementById('education-submit-text').textContent = 'Update';
                        
                        openModal('education-modal');
                    }
                }
            } catch (error) {
                console.error('Error loading education for edit:', error);
                showToast('Error loading education', 'error');
            }
        }
        
        async function deleteEducation(id) {
            if (confirm('Are you sure you want to delete this education entry?')) {
                try {
                    const response = await fetch(`${API_BASE}/education/${id}`, {
                        method: 'DELETE'
                    });
                    
                    const result = await response.json();
                    
                    if (result.success) {
                        loadEducation();
                        showToast(result.message || 'Education deleted successfully!');
                    } else {
                        showToast(result.message || 'Error deleting education', 'error');
                    }
                } catch (error) {
                    console.error('Error deleting education:', error);
                    showToast('Error deleting education', 'error');
                }
            }
        }
        
        // Experience Management
        async function loadExperience() {
            try {
                const response = await fetch(`${API_BASE}/experience`);
                if (response.ok) {
                    const result = await response.json();
                    const container = document.getElementById('experience-list');
                    
                    if (result.success) {
                        if (result.data.length === 0) {
                            container.innerHTML = '<p class="text-gray-500 text-center py-8">No experience entries added yet. Click "Add Experience" to get started.</p>';
                            return;
                        }
                        
                        container.innerHTML = result.data.map(exp => `
                            <div class="border rounded-lg p-4 flex justify-between items-center">
                                <div>
                                    <h3 class="font-medium">${exp.position}</h3>
                                    <p class="text-sm text-gray-600">${exp.company} - ${exp.location}</p>
                                    <p class="text-xs text-gray-500">${exp.period}</p>
                                </div>
                                <div class="flex space-x-2">
                                    <button class="edit-experience text-blue-600 hover:text-blue-800 p-2" data-id="${exp._id}">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="delete-experience text-red-600 hover:text-red-800 p-2" data-id="${exp._id}">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                        `).join('');
                        
                        // Add event listeners
                        document.querySelectorAll('.edit-experience').forEach(button => {
                            button.addEventListener('click', () => editExperience(button.getAttribute('data-id')));
                        });
                        
                        document.querySelectorAll('.delete-experience').forEach(button => {
                            button.addEventListener('click', () => deleteExperience(button.getAttribute('data-id')));
                        });
                    }
                }
            } catch (error) {
                console.error('Error loading experience:', error);
                showToast('Error loading experience', 'error');
            }
        }
        
        document.getElementById('add-experience').addEventListener('click', () => {
            document.getElementById('experience-modal-title').textContent = 'Add Experience';
            document.getElementById('experience-form').reset();
            document.getElementById('experience-id').value = '';
            document.getElementById('experience-submit-text').textContent = 'Save';
            openModal('experience-modal');
        });
        
        document.getElementById('experience-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const submitButton = e.target.querySelector('button[type="submit"]');
            const loadingEl = document.getElementById('experience-modal-loading');
            const submitText = document.getElementById('experience-submit-text');
            
            loadingEl.classList.remove('hidden');
            submitText.textContent = 'Saving...';
            submitButton.disabled = true;
            
            const experienceData = {
                period: document.getElementById('experience-period').value,
                position: document.getElementById('experience-position').value,
                company: document.getElementById('experience-company').value,
                location: document.getElementById('experience-location').value
            };
            
            const experienceId = document.getElementById('experience-id').value;
            const url = experienceId ? 
                `${API_BASE}/experience/${experienceId}` : 
                `${API_BASE}/experience`;
                
            const method = experienceId ? 'PUT' : 'POST';
            
            try {
                const response = await fetch(url, {
                    method: method,
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(experienceData)
                });
                
                const result = await response.json();
                
                if (result.success) {
                    closeModal('experience-modal');
                    loadExperience();
                    showToast(result.message || 'Experience saved successfully!');
                } else {
                    showToast(result.message || 'Error saving experience', 'error');
                }
            } catch (error) {
                console.error('Error saving experience:', error);
                showToast('Error saving experience', 'error');
            } finally {
                loadingEl.classList.add('hidden');
                submitText.textContent = 'Save';
                submitButton.disabled = false;
            }
        });
        
        async function editExperience(id) {
            try {
                const response = await fetch(`${API_BASE}/experience/${id}`);
                if (response.ok) {
                    const result = await response.json();
                    if (result.success) {
                        const exp = result.data;
                        
                        document.getElementById('experience-modal-title').textContent = 'Edit Experience';
                        document.getElementById('experience-id').value = exp._id;
                        document.getElementById('experience-period').value = exp.period;
                        document.getElementById('experience-position').value = exp.position;
                        document.getElementById('experience-company').value = exp.company;
                        document.getElementById('experience-location').value = exp.location || '';
                        document.getElementById('experience-submit-text').textContent = 'Update';
                        
                        openModal('experience-modal');
                    }
                }
            } catch (error) {
                console.error('Error loading experience for edit:', error);
                showToast('Error loading experience', 'error');
            }
        }
        
        async function deleteExperience(id) {
            if (confirm('Are you sure you want to delete this experience entry?')) {
                try {
                    const response = await fetch(`${API_BASE}/experience/${id}`, {
                        method: 'DELETE'
                    });
                    
                    const result = await response.json();
                    
                    if (result.success) {
                        loadExperience();
                        showToast(result.message || 'Experience deleted successfully!');
                    } else {
                        showToast(result.message || 'Error deleting experience', 'error');
                    }
                } catch (error) {
                    console.error('Error deleting experience:', error);
                    showToast('Error deleting experience', 'error');
                }
            }
        }
        
        // Skills Management
        async function loadSkills() {
            try {
                const response = await fetch(`${API_BASE}/skills`);
                if (response.ok) {
                    const result = await response.json();
                    const container = document.getElementById('skills-list');
                    
                    if (result.success) {
                        if (result.data.length === 0) {
                            container.innerHTML = '<p class="text-gray-500 text-center py-8">No skills added yet. Click "Add Skill" to get started.</p>';
                            return;
                        }
                        
                        container.innerHTML = result.data.map(skill => `
                            <div class="border rounded-lg p-4 flex justify-between items-center">
                                <div class="flex-1">
                                    <div class="flex justify-between mb-1">
                                        <span class="font-medium">${skill.name}</span>
                                        <span class="text-sm font-semibold">${skill.percentage}%</span>
                                    </div>
                                    <div class="w-full bg-gray-200 rounded-full h-2.5">
                                        <div class="bg-blue-600 h-2.5 rounded-full" style="width: ${skill.percentage}%"></div>
                                    </div>
                                </div>
                                <div class="flex space-x-2 ml-4">
                                    <button class="edit-skill text-blue-600 hover:text-blue-800 p-2" data-id="${skill._id}">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="delete-skill text-red-600 hover:text-red-800 p-2" data-id="${skill._id}">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                        `).join('');
                        
                        // Add event listeners
                        document.querySelectorAll('.edit-skill').forEach(button => {
                            button.addEventListener('click', () => editSkill(button.getAttribute('data-id')));
                        });
                        
                        document.querySelectorAll('.delete-skill').forEach(button => {
                            button.addEventListener('click', () => deleteSkill(button.getAttribute('data-id')));
                        });
                    }
                }
            } catch (error) {
                console.error('Error loading skills:', error);
                showToast('Error loading skills', 'error');
            }
        }
        
        document.getElementById('add-skill').addEventListener('click', () => {
            document.getElementById('skill-modal-title').textContent = 'Add Skill';
            document.getElementById('skill-form').reset();
            document.getElementById('skill-id').value = '';
            document.getElementById('skill-submit-text').textContent = 'Save';
            openModal('skill-modal');
        });
        
        document.getElementById('skill-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const submitButton = e.target.querySelector('button[type="submit"]');
            const loadingEl = document.getElementById('skill-modal-loading');
            const submitText = document.getElementById('skill-submit-text');
            
            loadingEl.classList.remove('hidden');
            submitText.textContent = 'Saving...';
            submitButton.disabled = true;
            
            const skillData = {
                name: document.getElementById('skill-name').value,
                percentage: parseInt(document.getElementById('skill-percentage').value)
            };
            
            const skillId = document.getElementById('skill-id').value;
            const url = skillId ? 
                `${API_BASE}/skills/${skillId}` : 
                `${API_BASE}/skills`;
                
            const method = skillId ? 'PUT' : 'POST';
            
            try {
                const response = await fetch(url, {
                    method: method,
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(skillData)
                });
                
                const result = await response.json();
                
                if (result.success) {
                    closeModal('skill-modal');
                    loadSkills();
                    showToast(result.message || 'Skill saved successfully!');
                } else {
                    showToast(result.message || 'Error saving skill', 'error');
                }
            } catch (error) {
                console.error('Error saving skill:', error);
                showToast('Error saving skill', 'error');
            } finally {
                loadingEl.classList.add('hidden');
                submitText.textContent = 'Save';
                submitButton.disabled = false;
            }
        });
        
        async function editSkill(id) {
            try {
                const response = await fetch(`${API_BASE}/skills/${id}`);
                if (response.ok) {
                    const result = await response.json();
                    if (result.success) {
                        const skill = result.data;
                        
                        document.getElementById('skill-modal-title').textContent = 'Edit Skill';
                        document.getElementById('skill-id').value = skill._id;
                        document.getElementById('skill-name').value = skill.name;
                        document.getElementById('skill-percentage').value = skill.percentage;
                        document.getElementById('skill-submit-text').textContent = 'Update';
                        
                        openModal('skill-modal');
                    }
                }
            } catch (error) {
                console.error('Error loading skill for edit:', error);
                showToast('Error loading skill', 'error');
            }
        }
        
        async function deleteSkill(id) {
            if (confirm('Are you sure you want to delete this skill?')) {
                try {
                    const response = await fetch(`${API_BASE}/skills/${id}`, {
                        method: 'DELETE'
                    });
                    
                    const result = await response.json();
                    
                    if (result.success) {
                        loadSkills();
                        showToast(result.message || 'Skill deleted successfully!');
                    } else {
                        showToast(result.message || 'Error deleting skill', 'error');
                    }
                } catch (error) {
                    console.error('Error deleting skill:', error);
                    showToast('Error deleting skill', 'error');
                }
            }
        }
        
        // Testimonials Management
        async function loadTestimonials() {
            try {
                const response = await fetch(`${API_BASE}/testimonials`);
                if (response.ok) {
                    const result = await response.json();
                    const container = document.getElementById('testimonials-list');
                    
                    if (result.success) {
                        if (result.data.length === 0) {
                            container.innerHTML = '<p class="text-gray-500 text-center py-8">No testimonials added yet. Click "Add Testimonial" to get started.</p>';
                            return;
                        }
                        
                        container.innerHTML = result.data.map(testimonial => `
                            <div class="border rounded-lg p-4">
                                <div class="flex justify-between items-start mb-4">
                                    <div class="flex items-center">
                                        ${testimonial.avatar ? `
                                            <img src="https://portfolio-backend-8xqk.onrender.com${testimonial.avatar}" class="w-12 h-12 rounded-full mr-3 object-cover">
                                        ` : `
                                            <div class="w-12 h-12 bg-gray-300 rounded-full flex items-center justify-center mr-3">
                                                <i class="fas fa-user text-gray-600"></i>
                                            </div>
                                        `}
                                        <div>
                                            <h3 class="font-medium">${testimonial.name}</h3>
                                            <p class="text-sm text-gray-600">${testimonial.position}, ${testimonial.company}</p>
                                        </div>
                                    </div>
                                    <div class="flex space-x-2">
                                        <button class="edit-testimonial text-blue-600 hover:text-blue-800 p-2" data-id="${testimonial._id}">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="delete-testimonial text-red-600 hover:text-red-800 p-2" data-id="${testimonial._id}">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </div>
                                <p class="text-gray-700 italic">"${testimonial.content}"</p>
                            </div>
                        `).join('');
                        
                        // Add event listeners
                        document.querySelectorAll('.edit-testimonial').forEach(button => {
                            button.addEventListener('click', () => editTestimonial(button.getAttribute('data-id')));
                        });
                        
                        document.querySelectorAll('.delete-testimonial').forEach(button => {
                            button.addEventListener('click', () => deleteTestimonial(button.getAttribute('data-id')));
                        });
                    }
                }
            } catch (error) {
                console.error('Error loading testimonials:', error);
                showToast('Error loading testimonials', 'error');
            }
        }
        
        document.getElementById('add-testimonial').addEventListener('click', () => {
            document.getElementById('testimonial-modal-title').textContent = 'Add Testimonial';
            document.getElementById('testimonial-form').reset();
            document.getElementById('testimonial-id').value = '';
            document.getElementById('testimonial-avatar-preview').innerHTML = '';
            document.getElementById('testimonial-submit-text').textContent = 'Save';
            openModal('testimonial-modal');
        });
        
        document.getElementById('testimonial-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const submitButton = e.target.querySelector('button[type="submit"]');
            const loadingEl = document.getElementById('testimonial-modal-loading');
            const submitText = document.getElementById('testimonial-submit-text');
            
            loadingEl.classList.remove('hidden');
            submitText.textContent = 'Saving...';
            submitButton.disabled = true;
            
            const testimonialData = {
                name: document.getElementById('testimonial-name').value,
                position: document.getElementById('testimonial-position').value,
                company: document.getElementById('testimonial-company').value,
                content: document.getElementById('testimonial-content').value
            };
            
            const testimonialId = document.getElementById('testimonial-id').value;
            const url = testimonialId ? 
                `${API_BASE}/testimonials/${testimonialId}` : 
                `${API_BASE}/testimonials`;
                
            const method = testimonialId ? 'PUT' : 'POST';
            
            try {
                const response = await fetch(url, {
                    method: method,
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(testimonialData)
                });
                
                const result = await response.json();
                
                if (result.success) {
                    // Handle avatar upload if any
                    const avatarFile = document.getElementById('testimonial-avatar').files[0];
                    if (avatarFile) {
                        const formData = new FormData();
                        formData.append('file', avatarFile);
                        
                        const avatarResponse = await fetch(`${API_BASE}/upload`, {
                            method: 'POST',
                            body: formData
                        });
                        
                        if (avatarResponse.ok) {
                            const avatarResult = await avatarResponse.json();
                            // Update testimonial with avatar
                            await fetch(`${API_BASE}/testimonials/${result.data._id}`, {
                                method: 'PUT',
                                headers: {
                                    'Content-Type': 'application/json'
                                },
                                body: JSON.stringify({ avatar: avatarResult.filePath })
                            });
                        }
                    }
                    
                    closeModal('testimonial-modal');
                    loadTestimonials();
                    showToast(result.message || 'Testimonial saved successfully!');
                } else {
                    showToast(result.message || 'Error saving testimonial', 'error');
                }
            } catch (error) {
                console.error('Error saving testimonial:', error);
                showToast('Error saving testimonial', 'error');
            } finally {
                loadingEl.classList.add('hidden');
                submitText.textContent = 'Save';
                submitButton.disabled = false;
            }
        });
        
        async function editTestimonial(id) {
            try {
                const response = await fetch(`${API_BASE}/testimonials/${id}`);
                if (response.ok) {
                    const result = await response.json();
                    if (result.success) {
                        const testimonial = result.data;
                        
                        document.getElementById('testimonial-modal-title').textContent = 'Edit Testimonial';
                        document.getElementById('testimonial-id').value = testimonial._id;
                        document.getElementById('testimonial-name').value = testimonial.name;
                        document.getElementById('testimonial-position').value = testimonial.position || '';
                        document.getElementById('testimonial-company').value = testimonial.company || '';
                        document.getElementById('testimonial-content').value = testimonial.content;
                        document.getElementById('testimonial-submit-text').textContent = 'Update';
                        
                        // Show current avatar if exists
                        if (testimonial.avatar) {
                            document.getElementById('testimonial-avatar-preview').innerHTML = `
                                <img src="https://portfolio-backend-8xqk.onrender.com${testimonial.avatar}" class="image-preview border rounded">
                                <p class="text-sm text-gray-500 mt-1">Current avatar</p>
                            `;
                        }
                        
                        openModal('testimonial-modal');
                    }
                }
            } catch (error) {
                console.error('Error loading testimonial for edit:', error);
                showToast('Error loading testimonial', 'error');
            }
        }
        
        async function deleteTestimonial(id) {
            if (confirm('Are you sure you want to delete this testimonial?')) {
                try {
                    const response = await fetch(`${API_BASE}/testimonials/${id}`, {
                        method: 'DELETE'
                    });
                    
                    const result = await response.json();
                    
                    if (result.success) {
                        loadTestimonials();
                        showToast(result.message || 'Testimonial deleted successfully!');
                    } else {
                        showToast(result.message || 'Error deleting testimonial', 'error');
                    }
                } catch (error) {
                    console.error('Error deleting testimonial:', error);
                    showToast('Error deleting testimonial', 'error');
                }
            }
        }
        
        // Contact Management
        async function loadContact() {
            try {
                const response = await fetch(`${API_BASE}/contact`);
                if (response.ok) {
                    const result = await response.json();
                    if (result.success && result.data) {
                        const contact = result.data;
                        document.getElementById('contact-phone').value = contact.phone || '';
                        document.getElementById('contact-email').value = contact.email || '';
                        document.getElementById('contact-location').value = contact.location || '';
                        document.getElementById('contact-linkedin').value = contact.socialLinks?.linkedin || '';
                        document.getElementById('contact-github').value = contact.socialLinks?.github || '';
                        document.getElementById('contact-twitter').value = contact.socialLinks?.twitter || '';
                    }
                }
            } catch (error) {
                console.error('Error loading contact:', error);
                showToast('Error loading contact information', 'error');
            }
        }
        
        document.getElementById('contact-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const submitButton = e.target.querySelector('button[type="submit"]');
            setLoading(submitButton, true);
            
            const contactData = {
                phone: document.getElementById('contact-phone').value,
                email: document.getElementById('contact-email').value,
                location: document.getElementById('contact-location').value,
                socialLinks: {
                    linkedin: document.getElementById('contact-linkedin').value,
                    github: document.getElementById('contact-github').value,
                    twitter: document.getElementById('contact-twitter').value
                }
            };
            
            try {
                const response = await fetch(`${API_BASE}/contact`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(contactData)
                });
                
                const result = await response.json();
                
                if (result.success) {
                    showToast('Contact information updated successfully!');
                } else {
                    showToast(result.message || 'Error updating contact information', 'error');
                }
            } catch (error) {
                console.error('Error saving contact:', error);
                showToast('Error updating contact information', 'error');
            } finally {
                setLoading(submitButton, false);
            }
        });
        
        // Theme Management
        async function loadTheme() {
            try {
                const response = await fetch(`${API_BASE}/theme`);
                if (response.ok) {
                    const result = await response.json();
                    if (result.success && result.data) {
                        const theme = result.data;
                        document.getElementById('theme-primary').value = theme.primaryColor || '#121223';
                        document.getElementById('theme-secondary').value = theme.secondaryColor || '#1e1e32';
                        document.getElementById('theme-accent').value = theme.accentColor || '#ffaa00';
                        document.getElementById('theme-font').value = theme.fontFamily || 'Inter, sans-serif';
                        
                        // Update preview
                        const preview = document.getElementById('theme-preview');
                        preview.style.backgroundColor = theme.primaryColor || '#121223';
                        preview.querySelector('div').style.backgroundColor = theme.secondaryColor || '#1e1e32';
                        preview.querySelector('h4').style.color = theme.accentColor || '#ffaa00';
                        preview.querySelector('button').style.backgroundColor = theme.accentColor || '#ffaa00';
                    }
                }
            } catch (error) {
                console.error('Error loading theme:', error);
                showToast('Error loading theme settings', 'error');
            }
        }
        
        document.getElementById('theme-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const submitButton = e.target.querySelector('button[type="submit"]');
            setLoading(submitButton, true);
            
            const themeData = {
                primaryColor: document.getElementById('theme-primary').value,
                secondaryColor: document.getElementById('theme-secondary').value,
                accentColor: document.getElementById('theme-accent').value,
                fontFamily: document.getElementById('theme-font').value
            };
            
            try {
                const response = await fetch(`${API_BASE}/theme`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(themeData)
                });
                
                const result = await response.json();
                
                if (result.success) {
                    showToast('Theme settings updated successfully!');
                } else {
                    showToast(result.message || 'Error updating theme settings', 'error');
                }
            } catch (error) {
                console.error('Error saving theme:', error);
                showToast('Error updating theme settings', 'error');
            } finally {
                setLoading(submitButton, false);
            }
        });
        
        // Site Info Management
        async function loadSiteInfo() {
            try {
                const response = await fetch(`${API_BASE}/siteinfo`);
                if (response.ok) {
                    const result = await response.json();
                    if (result.success && result.data) {
                        const siteInfo = result.data;
                        document.getElementById('siteinfo-title').value = siteInfo.siteTitle || '';
                        document.getElementById('siteinfo-footer').value = siteInfo.footerText || '';
                        
                        if (siteInfo.logo) {
                            document.getElementById('logo-preview').innerHTML = `
                                <img src="https://portfolio-backend-8xqk.onrender.com${siteInfo.logo}" class="image-preview border rounded">
                                <p class="text-sm text-gray-500 mt-1">Current logo</p>
                            `;
                        }
                    }
                }
            } catch (error) {
                console.error('Error loading site info:', error);
                showToast('Error loading site information', 'error');
            }
        }
        
        document.getElementById('siteinfo-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const submitButton = e.target.querySelector('button[type="submit"]');
            setLoading(submitButton, true);
            
            const formData = new FormData();
            formData.append('siteTitle', document.getElementById('siteinfo-title').value);
            formData.append('footerText', document.getElementById('siteinfo-footer').value);
            
            const logoFile = document.getElementById('siteinfo-logo').files[0];
            if (logoFile) {
                formData.append('logo', logoFile);
            }
            
            try {
                const response = await fetch(`${API_BASE}/siteinfo`, {
                    method: 'POST',
                    body: formData
                });
                
                const result = await response.json();
                
                if (result.success) {
                    showToast('Site information updated successfully!');
                    loadSiteInfo(); // Reload to show updated logo
                    document.getElementById('siteinfo-logo').value = '';
                } else {
                    showToast(result.message || 'Error updating site information', 'error');
                }
            } catch (error) {
                console.error('Error saving site info:', error);
                showToast('Error updating site information', 'error');
            } finally {
                setLoading(submitButton, false);
            }
        });
        
        // Initialize the dashboard
        document.addEventListener('DOMContentLoaded', () => {
            loadHero();
            checkServerHealth();
            setInterval(checkServerHealth, 30000); // Check every 30 seconds
            
            // Theme preview
            document.getElementById('theme-form').addEventListener('input', () => {
                const primary = document.getElementById('theme-primary').value;
                const secondary = document.getElementById('theme-secondary').value;
                const accent = document.getElementById('theme-accent').value;
                
                const preview = document.getElementById('theme-preview');
                preview.style.backgroundColor = primary;
                preview.querySelector('div').style.backgroundColor = secondary;
                preview.querySelector('h4').style.color = accent;
                preview.querySelector('button').style.backgroundColor = accent;
            });
        });
    </script>
</body>
</html>